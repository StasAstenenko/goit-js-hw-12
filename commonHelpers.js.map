{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\nfunction imgTemplate({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) {\n    return `<li class=\"liElem\"><a href=\"${largeImageURL}\">\n        <img src=${webformatURL} alt=${tags} data-source=${largeImageURL}/></a>\n        <div>\n            <p>likes: <span>${likes}</span></p>\n            <p>views: <span>${views}</span></p>\n            <p>comments: <span>${comments}</span></p>\n            <p>downloads: <span>${downloads}</span></p>\n        </div>\n    </li>`\n}\n\nexport function imgTemplates(arr) {\n    return arr.map(imgTemplate).join('');\n}\n\n","import Axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport { hideLoadBtn } from \"../main\";\n\nconst per_page = 15;\nlet maxPage = 1;\n\nexport async function searchPhoto(img, currentPage) {\n    const axios = Axios.create({\n        baseURL: 'https://pixabay.com/api/',\n        params: {\n            key: '44428338-9196df2338f39a1a95b2ab25e',\n            image_type: 'photo',\n            orientation: 'horizontal',\n            q: `${img}`,\n            safesearch: true,\n            per_page: per_page,\n            page: currentPage,\n        },\n    });\n    try {\n        const { data } = await axios.get('');\n        maxPage = data.totalHits / per_page;\n        if (currentPage >= maxPage) {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n            });\n            hideLoadBtn();\n        };\n        return data.hits; \n    } catch (err) {\n        console.log(err);\n    };      \n}\n","import { imgTemplates } from './js/render-functions.js';\nimport { searchPhoto } from './js/pixabay-api.js';\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst formElem = document.querySelector('.form-el');\nconst inputElem = formElem.querySelector('.input-search');\nconst loadElem = document.querySelector('.loader')\nconst listElem = document.querySelector('.img-list');\nconst loadBtn = document.querySelector('.load');\nconst liElem = document.querySelector('.liElem');\n\nlet currentPage = 1;\n\nformElem.addEventListener('submit', e => {\n    e.preventDefault();\n    listElem.innerHTML = ''; \n    loadElem.classList.remove('visually-hidden');\n\n    clickBtn();\n});\n\nloadBtn.addEventListener('click', () => {\n    currentPage++;\n    hideLoadBtn();\n    clickBtn();\n});\n\nasync function createTemplate(searchQuery, currentPage) {\n    try {   \n        const data = await searchPhoto(searchQuery, currentPage);\n        if (data && data.length > 0) {\n            const markUp = imgTemplates(data);\n            listElem.insertAdjacentHTML('beforeend', markUp);\n            modalShow();\n        } else {\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight'\n            })\n        }\n    } catch (err) {\n        console.log(err);\n    };\n\n}\n\nfunction clickBtn() {\n    if (inputElem.value.trim() === '') {\n        hideLoadBtn();\n        return;\n    } else {\n        createTemplate(inputElem.value.trim(), currentPage);\n        loadElem.classList.add('visually-hidden');\n        showLoadBtn();\n    };\n}\n\nfunction showLoadBtn() {\n    loadBtn.classList.remove('visually-hidden');\n}\n\nexport  function hideLoadBtn() {\n    loadBtn.classList.add('visually-hidden');\n}\n\nfunction modalShow() {\n    const lightbox = new SimpleLightbox('.img-list a', { \n        overlayOpacity: 0.9,\n        captionDelay: 250,\n        captionsData: \"alt\",\n    });\n    lightbox.refresh()\n}"],"names":["imgTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imgTemplates","arr","per_page","maxPage","searchPhoto","img","currentPage","axios","Axios","data","iziToast","hideLoadBtn","err","formElem","inputElem","loadElem","listElem","loadBtn","e","clickBtn","createTemplate","searchQuery","markUp","modalShow","showLoadBtn","SimpleLightbox"],"mappings":"owBACA,SAASA,EAAY,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,GAAa,CAC3F,MAAO,+BAA+BL,CAAa;AAAA,mBACpCD,CAAY,QAAQE,CAAI,gBAAgBD,CAAa;AAAA;AAAA,8BAE1CE,CAAK;AAAA,8BACLC,CAAK;AAAA,iCACFC,CAAQ;AAAA,kCACPC,CAAS;AAAA;AAAA,UAG3C,CAEO,SAASC,EAAaC,EAAK,CAC9B,OAAOA,EAAI,IAAIT,CAAW,EAAE,KAAK,EAAE,CACvC,CCXA,MAAMU,EAAW,GACjB,IAAIC,EAAU,EAEP,eAAeC,EAAYC,EAAKC,EAAa,CAChD,MAAMC,EAAQC,EAAM,OAAO,CACvB,QAAS,2BACT,OAAQ,CACJ,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,EAAG,GAAGH,CAAG,GACT,WAAY,GACZ,SAAUH,EACV,KAAMI,CACT,CACT,CAAK,EACD,GAAI,CACA,KAAM,CAAE,KAAAG,CAAI,EAAK,MAAMF,EAAM,IAAI,EAAE,EACnC,OAAAJ,EAAUM,EAAK,UAAYP,EACvBI,GAAeH,IACfO,EAAS,KAAK,CACV,QAAS,4DACzB,CAAa,EACDC,KAEGF,EAAK,IACf,OAAQG,EAAK,CACV,QAAQ,IAAIA,CAAG,CAEvB,CAAA,CCvBA,MAAMC,EAAW,SAAS,cAAc,UAAU,EAC5CC,EAAYD,EAAS,cAAc,eAAe,EAClDE,EAAW,SAAS,cAAc,SAAS,EAC3CC,EAAW,SAAS,cAAc,WAAW,EAC7CC,EAAU,SAAS,cAAc,OAAO,EAC/B,SAAS,cAAc,SAAS,EAE/C,IAAIX,EAAc,EAElBO,EAAS,iBAAiB,SAAUK,GAAK,CACrCA,EAAE,eAAc,EAChBF,EAAS,UAAY,GACrBD,EAAS,UAAU,OAAO,iBAAiB,EAE3CI,GACJ,CAAC,EAEDF,EAAQ,iBAAiB,QAAS,IAAM,CACpCX,IACAK,IACAQ,GACJ,CAAC,EAED,eAAeC,EAAeC,EAAaf,EAAa,CACpD,GAAI,CACA,MAAMG,EAAO,MAAML,EAAYiB,EAAaf,CAAW,EACvD,GAAIG,GAAQA,EAAK,OAAS,EAAG,CACzB,MAAMa,EAAStB,EAAaS,CAAI,EAChCO,EAAS,mBAAmB,YAAaM,CAAM,EAC/CC,GACZ,MACYb,EAAS,MAAM,CACX,MAAO,QACP,QAAS,2EACT,SAAU,UAC1B,CAAa,CAER,OAAQE,EAAK,CACV,QAAQ,IAAIA,CAAG,CAEvB,CACA,CAEA,SAASO,GAAW,CAChB,GAAIL,EAAU,MAAM,KAAI,IAAO,GAAI,CAC/BH,IACA,MACR,MACQS,EAAeN,EAAU,MAAM,KAAM,EAAER,CAAW,EAClDS,EAAS,UAAU,IAAI,iBAAiB,EACxCS,GAER,CAEA,SAASA,GAAc,CACnBP,EAAQ,UAAU,OAAO,iBAAiB,CAC9C,CAEQ,SAASN,GAAc,CAC3BM,EAAQ,UAAU,IAAI,iBAAiB,CAC3C,CAEA,SAASM,GAAY,CACA,IAAIE,EAAe,cAAe,CAC/C,eAAgB,GAChB,aAAc,IACd,aAAc,KACtB,CAAK,EACQ,QAAS,CACtB"}