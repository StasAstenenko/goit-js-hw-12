{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import Axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport { hideLoadBtn } from \"../main\";\n\nconst per_page = 15;\nlet maxPage = 1;\n\nexport async function searchPhoto(img, currentPage) {\n    const axios = Axios.create({\n        baseURL: 'https://pixabay.com/api/',\n        params: {\n            key: '44428338-9196df2338f39a1a95b2ab25e',\n            image_type: 'photo',\n            orientation: 'horizontal',\n            q: `${img}`,\n            safesearch: true,\n            per_page: per_page,\n            page: currentPage,\n        },\n    });\n    try {\n        const { data } = await axios.get('');\n        maxPage = data.totalHits / per_page;\n        if (currentPage >= maxPage) {\n            if (maxPage) {\n                iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n            });\n           }\n            hideLoadBtn();\n        };\n        return data.hits; \n    } catch (err) {\n        console.log(err);\n    };      \n}\n","import { searchPhoto } from './pixabay-api.js';\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst listElem = document.querySelector('.img-list');\n\nexport async function createTemplate(searchQuery, currentPage) {\n    try {   \n        const data = await searchPhoto(searchQuery, currentPage);\n        if (data && data.length > 0) {\n            const markUp = imgTemplates(data);\n            listElem.insertAdjacentHTML('beforeend', markUp);\n            modalShow();\n        } else {\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight'\n            })\n            return;\n        }\n    } catch (err) {\n        console.log(err);\n        return;\n    };\n\n}\n\nfunction imgTemplate({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) {\n    return `<li class=\"liElem\"><a href=\"${largeImageURL}\">\n        <img src=${webformatURL} alt=${tags} data-source=${largeImageURL}/></a>\n        <div>\n            <p>likes: <span>${likes}</span></p>\n            <p>views: <span>${views}</span></p>\n            <p>comments: <span>${comments}</span></p>\n            <p>downloads: <span>${downloads}</span></p>\n        </div>\n    </li>`\n}\n\nexport function imgTemplates(arr) {\n    return arr.map(imgTemplate).join('');\n}\n\nfunction modalShow() {\n    const lightbox = new SimpleLightbox('.img-list a', { \n        overlayOpacity: 0.9,\n        captionDelay: 250,\n        captionsData: \"alt\",\n    });\n    lightbox.refresh()\n}","import { createTemplate } from './js/render-functions.js';\n\nconst formElem = document.querySelector('.form-el');\nconst inputElem = formElem.querySelector('.input-search');\nconst loadElem = document.querySelector('.loader')\nconst listElem = document.querySelector('.img-list');\nconst loadBtn = document.querySelector('.load');\n\nlet currentPage = 1;\n\nformElem.addEventListener('submit', e => {\n    e.preventDefault();\n    listElem.innerHTML = '';\n    currentPage = 1;\n    hideLoadBtn();\n    if (inputElem.value.trim() === '') {\n        hideLoadBtn();\n        return;\n    } else {\n        createTemplate(inputElem.value.trim(), currentPage)\n        showLoadBtn();\n    }\n    loadElem.classList.add('visually-hidden');\n});\n\nloadBtn.addEventListener('click', () => {\n    currentPage++;\n    hideLoadBtn();\n    clickBtn();\n});\n\nfunction clickBtn() {\n    createTemplate(inputElem.value.trim(), currentPage).then(() => {\n        hideLoadBtn();\n        showLoadBtn();\n        scrollToNewImages()\n    });\n    loadElem.classList.add('visually-hidden');\n}\n\nfunction showLoadBtn() {\n    loadBtn.classList.remove('visually-hidden');\n}\n\nexport  function hideLoadBtn() {\n    loadBtn.classList.add('visually-hidden');\n}\n\nfunction scrollToNewImages() {\n    const items = document.querySelectorAll('.liElem');\n    if (items.length > 0) {\n        const itemHeight = items[0].getBoundingClientRect().height;\n        window.scrollBy({\n            top: itemHeight * 2,\n            left: 0,\n            behavior: 'smooth'\n        });\n    }\n}"],"names":["per_page","maxPage","searchPhoto","img","currentPage","axios","Axios","data","iziToast","hideLoadBtn","err","listElem","createTemplate","searchQuery","markUp","imgTemplates","modalShow","imgTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","arr","SimpleLightbox","formElem","inputElem","loadElem","loadBtn","e","showLoadBtn","clickBtn","scrollToNewImages","items","itemHeight"],"mappings":"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"}