{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\nfunction imgTemplate({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) {\n    return `<li class=\"liElem\"><a href=\"${largeImageURL}\">\n        <img src=${webformatURL} alt=${tags} data-source=${largeImageURL}/></a>\n        <div>\n            <p>likes: <span>${likes}</span></p>\n            <p>views: <span>${views}</span></p>\n            <p>comments: <span>${comments}</span></p>\n            <p>downloads: <span>${downloads}</span></p>\n        </div>\n    </li>`\n}\n\nexport function imgTemplates(arr) {\n    return arr.map(imgTemplate).join('');\n}\n\n","import Axios from \"axios\";\n\nexport async function searchPhoto(img, currentPage) {\n    const axios = Axios.create({\n        baseURL: 'https://pixabay.com/api/',\n        params: {\n            key: '44428338-9196df2338f39a1a95b2ab25e',\n            image_type: 'photo',\n            orientation: 'horizontal',\n            q: `${img}`,\n            safesearch: true,\n            per_page: 15,\n            page: currentPage,\n        },\n    });\n    try {\n        const res  = await axios.get('');\n        return res.data; \n    } catch (err) {\n        console.log(err);\n    };      \n}\n","import { imgTemplates } from './js/render-functions.js';\nimport { searchPhoto } from './js/pixabay-api.js';\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst formElem = document.querySelector('.form-el');\nconst inputElem = formElem.querySelector('.input-search');\nconst loadElem = document.querySelector('.loader')\nconst listElem = document.querySelector('.img-list');\nconst loadBtn = document.querySelector('.load');\n\nlet currentPage = 1;\nconst per_page = 15;\nlet maxPage = 1;\nlet search = '';\n\nformElem.addEventListener('submit', e => {\n    e.preventDefault();\n    listElem.innerHTML = '';\n    if (inputElem.value.trim() === '') {\n        iziToast.error({\n            title: 'Error',\n            message: 'Enter your details. Please try again!',\n            position: 'topRight', \n        });\n    };\n    search = inputElem.value.trim();\n    currentPage = 1;\n    showLoader();\n    hideLoadBtn();\n    createTemplate(search, currentPage);\n    formElem.reset();\n});\n\nloadBtn.addEventListener('click', () => {\n    currentPage++;\n    showLoader();\n    hideLoadBtn();\n    clickBtn(search, currentPage);\n});\n\nasync function clickBtn(searchQuery, currentPage) {\n    try {   \n        const data = await searchPhoto(searchQuery, currentPage);\n        if (data.total === 0) {\n            showErr();\n        }\n        const markUp = imgTemplates(data.hits);\n        listElem.insertAdjacentHTML('beforeend', markUp);\n        modalShow();\n        scrollToNewImages();\n    } catch {\n        warningErr();\n    };\n    updateStatus();\n    hideLoader();\n}\n\nfunction showLoadBtn() {\n    loadBtn.classList.remove('visually-hidden');\n}\n\nfunction hideLoadBtn() {\n    loadBtn.classList.add('visually-hidden');\n}\n\nfunction scrollToNewImages() {\n    const items = document.querySelectorAll('.liElem');\n    if (items.length > 0) {\n        const itemHeight = items[0].getBoundingClientRect().height;\n        window.scrollBy({\n            top: itemHeight * 2,\n            left: 0,\n            behavior: 'smooth'\n        });\n    }\n}\n\nasync function createTemplate(searchQuery, currentPage) {\n    try {   \n        const data = await searchPhoto(searchQuery, currentPage);\n        maxPage = Math.ceil(data.total / per_page);\n        if (data.total === 0) {\n            hideLoader();\n            showErr();\n        }\n        const markUp = imgTemplates(data.hits);\n        listElem.insertAdjacentHTML('beforeend', markUp);\n        modalShow();\n    } catch {\n        warningErr();\n    };\n    updateStatus();\n    hideLoader();\n}\n\nfunction updateStatus() {\n    if (currentPage >= maxPage) {\n        hideLoadBtn();\n        if (maxPage) {\n                iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n            });\n        };\n    } else {\n        showLoadBtn();\n    };\n}\n  \n\nfunction modalShow() {\n    const lightbox = new SimpleLightbox('.img-list a', { \n        overlayOpacity: 0.9,\n        captionDelay: 250,\n        captionsData: \"alt\",\n    });\n    lightbox.refresh()\n}\n\nfunction hideLoader() {\n    loadElem.classList.add('visually-hidden');\n}\n\nfunction showLoader() {\n    loadElem.classList.remove('visually-hidden');\n}\n\nfunction showErr() {\n    iziToast.error({\n        title: 'Error',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight'\n    })\n};\n\nfunction warningErr() {\n    iziToast.warning({\n        message: 'Problem with server!',\n        position: 'topRight'\n    });\n}"],"names":["imgTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imgTemplates","arr","searchPhoto","img","currentPage","axios","Axios","err","formElem","inputElem","loadElem","listElem","loadBtn","per_page","maxPage","search","e","iziToast","showLoader","hideLoadBtn","createTemplate","clickBtn","searchQuery","data","showErr","markUp","modalShow","scrollToNewImages","warningErr","updateStatus","hideLoader","showLoadBtn","items","itemHeight","SimpleLightbox"],"mappings":"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"}